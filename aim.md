# **Цель, актуальность и решаемые задачи**

## **Тема**

Разработка модуля для визуального анализа корректности PBR-материалов и освещения в Unreal Engine (на примере Post-Process Material).

## **Цель**

Разработать и реализовать в Unreal Engine 5 **визуальный отладочный модуль (Post-Process Material)**, способный в реальном времени анализировать и подсвечивать некорректные или выходящие за границы физически правдоподобного диапазона (PBR, Physically Based Rendering) значения параметров материалов (Albedo/BaseColor, Metallic, Specular, Roughness) и интенсивности освещения на сцене.

## **Список задач для достижения цели**

1. **Анализ PBR-параметров:**  
   * Проанализировать теоретические основы PBR-рендеринга и определить рекомендуемые диапазоны значений для ключевых параметров материалов в контексте PBR и Substrate: Base Color/Albedo (диапазон яркости), Metallic (бинарные значения 0 или 1), Specular (для диэлектриков в диапазоне 0-1), Roughness (для предотвращения "зеркальных" или слишком матовых поверхностей).  
2. **Выбор и обоснование метода реализации:**  
   * Обосновать выбор Post-Process Material как основного инструмента для визуального анализа (из-за доступа к финальным данным рендеринга и возможности быстрого переключения режимов).  
3. **Разработка визуальных режимов отладки:**  
   * Разработать логику, которая визуально подсвечивает сцену в следующих режимах:  
     * **Albedo Check (Базовый цвет):** Отображение материалов в градациях серого с цветовой индикацией (например, красным/синим) для пикселей, чья яркость выходит за рекомендованный PBR-диапазон (слишком темные/светлые материалы).
     * **Metallic/Specular Check (Металличность и Зеркальность):** Визуализация значений Metallic и Specular. Подсветка некорректных промежуточных значений Metallic и выявление значений Specular вне допустимого диапазона (например, для диэлектриков).
     * **Roughness Check (Шероховатость):** Индикация экстремально низких (почти зеркальных) или экстремально высоких (слишком матовых) значений, которые могут создавать визуальный шум.  
     * **Lighting Check (Проверка освещения/EV-значений):** Режим, отображающий сцену с помощью "зебры" или цветовой карты, где каждый цвет соответствует определенному диапазону EV (Exposure Value) или яркости, чтобы быстро оценить интенсивность источников света.  
4. **Интеграция в Unreal Engine:**  
   * Реализовать разработанный Post-Process Material и настроить его активацию/деактивацию в редакторе (например, через Blueprint или Console Commands).  
5. **Тестирование и документирование:**  
   * Провести тестирование модуля на демонстрационной сцене с заведомо корректными и некорректными PBR-материалами.  
   * Составить пользовательскую документацию по установке, настройке и использованию модуля.

# **Актуальность проекта**

## **Повышение качества и реалистичности графики**

Физически корректный рендеринг (PBR) требует строгого соблюдения правил при создании текстур и настройке материалов. Нарушение этих правил (например, слишком яркий базовый цвет, Metallic=0.5 для неметаллического объекта) приводит к нереалистичному освещению и неестественному внешнему виду объектов. Разрабатываемый модуль позволит художникам и дизайнерам быстро выявлять и исправлять такие ошибки на этапе разработки, гарантируя соответствие PBR/Substrate-стандартам.

## **Сокращение времени на отладку**

Традиционный процесс отладки материалов и освещения в 3D-сцене часто является субъективным и трудоемким, требующим изменения настроек повторной визуальной оценки. Инструмент, который мгновенно показывает проблемные области с помощью четкой цветовой индикации, многократно сокращает время, затрачиваемое на поиск и устранение графических артефактов и ошибок PBR.

## **Оптимизация рабочего процесса для команд**

Модуль стандартизирует процесс проверки PBR-материалов. Он может использоваться как обязательный этап контроля качества (QC) в студиях разработки. Новые члены команды смогут быстрее освоить PBR-стандарты конкретной студии, используя модуль как обучающий инструмент.

## **Комплексный анализ освещения**

В дополнение к материалам, модуль позволяет анализировать экстремальные значения освещения. Проверка EV-значений (Exposure Value) поможет избежать пересвеченных или слишком темных участков сцены, которые могут маскировать ошибки материалов и ухудшать восприятие графики, что критически важно для настройки финального вида сцены.

# **Технологический стек для реализации проекта**

## **Основные компоненты**

* **Движок:** Unreal Engine 5 (UE5)  
* **Инструментарий:** Post-Process Materials (Основной компонент для реализации анализа).  
* **Язык шейдеров/визуальное программирование:** Material Editor (HLSL/Node-based programming) для создания логики Post-Process Material.  
* **Управление и Интеграция:** Unreal Engine Blueprints (для логики переключения режимов и пользовательского интерфейса/консольных команд).

# **Основные сценарии использования системы**

1. **Художник по материалам (Material Artist):**  
   * Запускает режим **Albedo Check** после импорта новой текстуры. Модуль подсвечивает синим цветом на текстуре пола, сигнализируя, что яркость базового цвета превышает 240 sRGB (слишком светлый). Художник корректирует текстуру в самом движке или Substance Painter/Designer и наблюдает, как подсветка исчезает в реальном времени.  
2. **Художник по освещению (Lighting Artist):**  
   * Запускает режим **Lighting Check**. Модуль отображает цветовой градиент, показывающий, что свет от прожектора дает значения EV выше \+10, что является критическим пересветом. Художник снижает интенсивность источника света до нормального диапазона.  
3. **Технический художник (Technical Artist):**  
   * Использует режим **Metallic/Specular Check** на всей сцене, чтобы убедиться, что все объекты либо являются чистыми диэлектриками (Metallic ≈ 0), либо чистыми металлами (Metallic ≈ 1), исключая нефизичное состояние материала.  
4. **Разработчик (Developer) / QA-инженер:**  
   * Интегрирует активацию Post-Process Material в скрипты автоматизированного тестирования для быстрого скриншотинга и верификации отсутствия PBR-ошибок перед релизом.
