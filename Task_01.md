# **Задача \- анализ теоретических основ PBR-рендеринга и определение допустимых диапазонов**

## **Процесс решения**

Понимание физики света и материалов \- это главное для создания логики валидационного шейдера. Выбор методики проверки лежит между двух подходов: строгая физическая корректность (PBR) и художественная интерпретация.  
Основное преимущество строгого PBR-подхода заключается в предсказуемости поведения материалов при любом освещении. Материалы, настроенные по физическим законам, корректно отражают свет как в яркий полдень, так и в темной пещере. В то же время "художественная настройка на глаз" \- это система с повышенными рисками, которая часто хорошо выглядит только в одном конкретном сценарии освещения, обязывая художника перенастраивать текстуры или материал при смене окружения. Зачастую ошибки в базовых параметрах (слишком темный Albedo или неправильный Specular) ломают фотореализм всей сцены. На данный момент предполагается, что для разрабатываемого модуля будет предпочтительна логика проверки, основанная на строгих диапазонах значений PBR.

Параметр Albedo (Base Color) не должен содержать абсолютных черных или белых значений. В природе нет материалов, поглощающих 100% света или отражающих 100%. Диапазон проверки будет установлен в пределах 0-30 sRGB для самых темных объектов, 30-50 для приемлемо тёмных объектов, 50-232 для полностью корректных, 232-243 для приемлемо светлых и 243-255 для слишком ярких.  
Металлы и диэлектрики имеют принципиально разную физику отражения, поэтому промежуточные значения (например, 0.5) чаще всего являются ошибкой или артефактом маски, за исключением редких случаев (пыль на металле).  
Параметр Specular для неметаллов (диэлектриков) будут в диапазоне 50-63 для полностью корректных материалов, 63-185 обычно является некорректным, но могут быть приемлемы в некоторых случая. Для металлов (электриков) будет установлен диапазон 185-235. Отклонения от этих значений будут помечаться как потенциальная ошибка, требующая внимания.  
Показательным свойством системы, построенной на контроле этих диапазонов, является визуальная устойчивость рендера.